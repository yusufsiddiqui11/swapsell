{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet ProductPageComponent = class ProductPageComponent {\n  constructor(route, productService, userService, router, pr) {\n    this.route = route;\n    this.productService = productService;\n    this.userService = userService;\n    this.router = router;\n    this.pr = pr;\n    // for image gallery\n    this.imgUrl = \"../../../assets/\";\n    this.currentImage = 0;\n    this.images = [\"\", \"-1\", \"-2\", \"-3\"];\n    this.products1 = [];\n    this.products2 = [];\n    this.seller = {};\n    //data for email \n    this.productName = \"\";\n  }\n  ngOnInit() {\n    this.productService.products$.subscribe(products => {\n      this.products1 = products?.slice(0, 4);\n      this.products2 = products?.slice(4, 8);\n    });\n    this.route.queryParams.subscribe(params => {\n      this.scrollToTop();\n      this.currentImage = 0;\n      this.productId = params['id'];\n      console.log(\"Product page - product id: \", this.productId);\n      this.getProduct();\n      this.getSeller();\n    });\n  }\n  scrollToTop() {\n    window.scrollTo(0, 0);\n  }\n  // fetch seller info\n  getSeller() {\n    this.productService.fetchSellerForProduct(this.productId).subscribe(data => {\n      console.log(\"--------------------------------Seller details-----------------------------\");\n      console.log(data);\n      this.seller = data;\n    });\n  }\n  // fetch product info\n  getProduct() {\n    this.productService.getProductById(this.productId).subscribe(product => {\n      console.log(product);\n      this.product = product;\n    }, error => {\n      console.error('Error fetching product:', error);\n    });\n  }\n  chat() {\n    this.userService.getUserEmail().subscribe(email => {\n      const participantId1 = email;\n      const participantId2 = this.seller.email;\n      this.userService.isChat(participantId1, participantId2).subscribe(res => {\n        if (res) {\n          console.log(\"chat already there\");\n          this.router.navigate(['/chat']);\n        } else {\n          console.log(\"no previous chat\");\n          this.userService.createNewChat(participantId1, participantId2).subscribe(data => {\n            console.log(\"new chat added\");\n            this.router.navigate(['/chat']);\n          });\n        }\n      });\n    });\n  }\n  // image slider - go to previous image\n  prevImage() {\n    if (this.currentImage > 0) {\n      this.currentImage--;\n      console.log(this.currentImage);\n    }\n  }\n  // go to next image\n  nextImage() {\n    if (this.currentImage < this.images.length - 1) {\n      this.currentImage++;\n      console.log(this.currentImage);\n    }\n  }\n};\nProductPageComponent = __decorate([Component({\n  selector: \"app-product-page\",\n  templateUrl: \"./product-page.component.html\",\n  styleUrls: [\"./product-page.component.css\"]\n})], ProductPageComponent);\nexport { ProductPageComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}